<html><BODY bgcolor="ffffff">
<PRE>
SSH-ADD2(1)                    SSH2                   SSH-ADD2(1)



<B>NAME</B>
       ssh-add2 - adds identities for the authentication agent


<B>SYNOPSIS</B>
       <B>ssh-add2 </B>[<B>-p] </B>[<B>-l] </B>[<B>-N] </B>[<B>-P] </B>[<B>-I] </B>[<B>-d</B>] [<B>-D</B>] [<B>-L</B>] [<B>-U</B>] [<B>-1</B>]
       [<B>-u</B>] [<B>-f forwarding steps</B>] [<B>-F forwarding constraint</B>]  [<B>-t</B>
       <B>key timeout in minutes</B>] [<B>-R OpenPGP keyring</B>] [<B>files</B>...]


<B>DESCRIPTION</B>
       <B>ssh-add2 </B>adds identities to the authentication agent, <B>ssh-</B>
       <B>agent2.  </B>If any file requires a passphrase, <B>ssh-add2  </B>asks
       for  the  passphrase  from  the user.  If the -p option is
       given, then the passphrase is read from  stdin,  otherwise
       if  the  user  is  using  X11, the passphrase is requested
       using a small X11 program; otherwise it is read  from  the
       user's  tty.  (Note: it may be necessary to redirect stdin
       from /dev/null to get the passphrase requested using X11.)

       The  authentication  agent  must be running and must be an
       ancestor of the current process for <B>ssh-add2 </B>to work.

       If  <B>ssh-add2  </B>needs  a  passphrase,  it  will   read   the
       passphrase from the current terminal, if it was run from a
       terminal.  If <B>ssh-add2 </B>does not have a terminal associated
       with  it but DISPLAY is set, it will open an X11 window to
       read the passphrase.  This  is  particularly  useful  when
       calling  <B>ssh-add2  </B>from  a  .Xsession  or  related script.
       (Note that on some machines it may be necessary  to  redi­
       rect the input from /dev/null to make this work.)



<B>OPTIONS</B>
       <B>-p   </B>Read passphrase from stdin (or pipe).

       <B>-l   </B>Lists  all  identities  currently  represented by the
            agent.

       <B>-N   </B>Keys added/deleted are stored in the OpenPGP  keyring
            and identified by key name string.

       <B>-P   </B>Keys  added/deleted are stored in the OpenPGP keyring
            and identified by key fingerprint.

       <B>-F   </B>Keys added/deleted are stored in the OpenPGP  keyring
            and identified by key id number.

       <B>-d   </B>Instead  of adding the identity, removes the identity
            from the agent.

       <B>-D   </B>Deletes all identities from the agent.

       <B>-L   </B>Temporarily locks the agent with a password.

       <B>-U   </B>Unlocks the locked agent.

       <B>-1   </B>The agent is not allowed to use keys added with  this
            command in ssh1 compatibility operations.

       <B>-u   </B>The  keys  added  are  not  read  from  the file, but
            instead the key is given to the agent as  URL.   With
            this  functionality,  the  agent  can get information
            about the additional key sources, like smartcards.

       <B>-f forwarding steps</B>
            The key can be used only through as  many  forwarding
            steps as directed by the argument.  Argument 0 states
            that the key can only be  used  locally.   Note  that
            ssh1  does not submit forwarding information, so with
            ssh1 compatibility, this constraint may not  work  as
            expected.

       <B>-F forwarding constraint</B>
            The argument is a comma separated list, through which
            kind of steps the key can be forwarded.  For  example
            constraint   string  "*.ssh.com,rinne.iki.fi"  states
            that key can be  forwarded  to  any  host  in  domain
            <I>ssh.fi   </I>and  also  to  host  <I>rinne.iki.fi  </I>and  used
            locally.  Be aware, that ssh1 does  not  submit  for­
            warding information, so with ssh1 compatibility, this
            constraint may not work as expected.

       <B>-t timeout</B>
            The agent is advised to delete the key after timeout.
            Timeout is given in minutes.

       <B>-R OpenPGP keyring</B>
            Argument identifies OpenPGP secret keyring file.


<B>RETURN STATUS</B>
       <B>ssh-add2  </B>returns  one  of  the  following  exit statuses.
       These may be useful in scripts.

       0      The requested operation was performed successfully.

       1      No  connection  could be made to the authentication
              agent.  Presumably there is no authentication agent
              active in the execution environment of <B>ssh-add2.</B>

       2      The user did not supply a required passphrase.

       3      An  identify file could not be found, was not read­
              able, or was in bad format.

       4      The agent does not have the requested identity.

       5      An unspecified error has occurred; this is a catch-
              all for errors not listed above.


<B>FILES</B>
       <I>$HOME/.ssh2/identification</I>
              Contains  names  of the private keys that are to be
              used  in  authentication.   See  <B>ssh2</B>(1)  for  more
              information.

       <I>$HOME/.ssh2/id</I><B>_</B><I>KEYTYPE</I><B>_</B><I>KEYLEN</I><B>_</B><I>X</I>

       <I>$HOME/.ssh2/id</I><B>_</B><I>KEYTYPE</I><B>_</B><I>KEYLEN</I><B>_</B><I>X.pub</I>
              Standard  private  and  public  identification  key
              files.



<B>AUTHORS</B>
       SSH Communications Security Corp

       For more information, see http://www.ssh.com.


<B>SEE ALSO</B>
       <B>ssh-agent2</B>(1), <B>ssh-keygen2</B>(1), <B>ssh2</B>(1), <B>sshd2</B>(8)



SSH2                      March 22, 2000              SSH-ADD2(1)
</PRE>
</BODY></html>
